from tkinter import *
from tkinter import messagebox
import base64
import matplotlib.pyplot as plt
from collections import Counter

def encrypt():
    message = text1.get(1.0, END).strip()
    shift = shift_entry.get()

    if shift != "1234":
        messagebox.showerror("Invalid Shift Key", "Invalid shift key value entered.")
        return

    language = language_choice.get()
    alphabet = alphabets.get(language, alphabets['english'])

    encrypted_message = ''
    for char in message:
        if char.lower() in alphabet:
            if char.isupper():
                encrypted_message += alphabet[(alphabet.index(char.lower()) + int(shift)) % len(alphabet)].upper()
            else:
                encrypted_message += alphabet[(alphabet.index(char.lower()) + int(shift)) % len(alphabet)]
        else:
            encrypted_message += char

    display_message("Encrypted Message", encrypted_message)

def decrypt():
    message = text1.get(1.0, END).strip()
    shift = shift_entry.get()

    if shift != "1234":
        messagebox.showerror("Invalid Secret Key", "Invalid secret key value entered.")
        return

    language = language_choice.get()
    alphabet = alphabets.get(language, alphabets['english'])

    decrypted_message = ''
    for char in message:
        if char.lower() in alphabet:
            if char.isupper():
                decrypted_message += alphabet[(alphabet.index(char.lower()) - int(shift)) % len(alphabet)].upper()
            else:
                decrypted_message += alphabet[(alphabet.index(char.lower()) - int(shift)) % len(alphabet)]
        else:
            decrypted_message += char

    display_message("Decrypted Message", decrypted_message)

def display_message(title, message):
    new_window = Toplevel(screen)
    new_window.title(title)

    text_widget = Text(new_window, wrap=WORD, height=5, width=50)
    text_widget.pack(padx=20, pady=20)
    text_widget.insert(END, message)

    # Enable copying of the message
    text_widget.config(state=DISABLED)  # Make the text widget read-only
    text_widget.bind("<1>", lambda event: text_widget.focus_set())  # Make the text widget selectable
    text_widget.bind("<Control-a>", lambda event: text_widget.tag_add(SEL, "1.0", END))  # Select all text
    text_widget.bind("<Control-c>", lambda event: new_window.clipboard_append(text_widget.selection_get()))  # Copy selected text

# Create GUI
screen = Tk()
screen.geometry("600x400")
screen.title("Caesar Cipher with Multi-Language Support")
screen.configure(bg="black")

# Define alphabets for different languages
alphabets = {
    'english': 'abcdefghijklmnopqrstuvwxyz',
    'tamil': 'அஆஇஈஉஊ஋எஏஐஒஓஔகஙசஜஞடணதநபமயரலவழளறனஸஷஹ௦௧௨௩௪௫௬௭௮௯௰௱௲',
    'kannada': 'ಅಆಇಈಉಊಋಎಏಐಒಓಔಕಖಗಘಙಚಛಜಝಞಟಠಡಢಣತಥದಧನಪಫಬಭಮಯರಱಲಳವಶಷಸಹಽೠೡೢೣ೤೥',
    'hindi': 'अआइईउऊऋएऐओऔकखगघङचछजझञटठडढणतथदधनपफबभमयरलवशषसहऽॐ।॥',
    'telugu': 'అఆఇఈఉఊఋౠఌఎఏఐఒఓఔకఖగఘఙచఛజఝఞటఠడఢణతథదధనపఫబభమయరఱలళవశషసహ',
}

Label(screen, text="Enter the Message:", bg="black", fg="white").pack()
text1 = Text(screen, height=5, width=50)
text1.pack()

Label(screen, text="Select Language:", bg="black", fg="white").pack()
language_choice = StringVar(screen)
language_choice.set('english')  # Default language
OptionMenu(screen, language_choice, *alphabets.keys()).pack()

Label(screen, text="Enter the Secret Key:", bg="black", fg="white").pack()
shift_entry = Entry(screen, show="*", bg="white", fg="black")
shift_entry.pack()

Button(screen, text="Encrypt", command=encrypt, bg="green", fg="white", font=("Helvetica", 14)).pack(pady=10)
Button(screen, text="Decrypt", command=decrypt, bg="red", fg="white", font=("Helvetica", 14)).pack(pady=10)

screen.mainloop()
